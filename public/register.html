<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Реєстрація користувача — Демо №2</title>
<style>
  :root{
    --bg: #0b0f1a;
    --card-bg: rgba(255,255,255,0.03);
    --neon1: #7df9ff;
    --neon2: #ff6bcb;
    --accent: linear-gradient(90deg,var(--neon1),var(--neon2));
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);color:#e6eef6;overflow-x:hidden}
  .wrap{min-height:100vh;display:flex;flex-direction:column;align-items:center;gap:40px;padding:60px 20px;position:relative;margin-left:60px;transition:margin-left 0.3s ease-in-out}

  .navbar {
    position: fixed;
    top: 0;
    left: 60px;
    right: 0;
    background: rgba(11,15,26,0.8);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 40px;
    backdrop-filter: blur(8px);
    border-bottom: 1px solid rgba(255,255,255,0.05);
    z-index: 20;
    transition: left 0.3s ease-in-out;
  }
  .logo {font-weight:700;font-size:1.3rem;background:var(--accent);-webkit-background-clip:text;background-clip:text;color:transparent;}
  .nav-links {display:flex;gap:20px;margin-left:10px;}
  .nav-links a {position:relative;color:rgba(255,255,255,0.85);text-decoration:none;font-weight:500;letter-spacing:0.5px;transition:color 0.3s;}
  .nav-links a::after {content:"";position:absolute;left:0;bottom:-4px;width:0;height:3px;border-radius:4px;background:linear-gradient(90deg,#ffae00,#ff6a00);box-shadow:0 0 6px #ffae00,0 0 10px #ff6a00;transition:width 0.3s;}
  .nav-links a:hover{color:#fff;text-shadow:0 0 8px #ffae00;}
  .nav-links a:hover::after{width:100%;}

  .sidebar {
    position: fixed;
    top: 0;
    left: 0;
    width: 60px;
    height: 100vh;
    background: #1a2238;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 100px;
    transition: width 0.3s ease-in-out;
    overflow-x: hidden;
    z-index: 15;
  }
  .sidebar:hover {width: 200px;}
  .sidebar a {position:relative;margin:20px 0;display:flex;align-items:center;gap:10px;}
  .sidebar img {width:40px;cursor:pointer;transition: transform 0.3s ease;}
  .sidebar a:hover img {transform:scale(1.2);}
  .tooltip {display:none;background-color:#2c3e50;color:white;padding:5px 10px;border-radius:5px;font-size:14px;white-space:nowrap;}
  .sidebar a:hover .tooltip {display:inline-block;}

  .waves {position:absolute;left:0;right:0;top:0;height:380px;pointer-events:none;overflow:hidden;z-index:0;
    background:
      radial-gradient(ellipse at 10% 20%, rgba(125,249,255,0.06) 0%, rgba(125,249,255,0) 20%),
      radial-gradient(ellipse at 90% 80%, rgba(255,107,203,0.05) 0%, rgba(255,107,203,0) 20%);
  }
  .wave-layer {position:absolute;left:-10%;right:-10%;height:160px;bottom:-10px;opacity:0.12;background:repeating-linear-gradient(0deg, rgba(255,255,255,0.02) 0 1px, rgba(0,0,0,0.01) 1px 4px);transform: translateY(0);filter: blur(10px);animation: wave 8s linear infinite;}
  .wave-layer.layer2{opacity:0.08;animation-duration:12s;transform-origin:50% 50%;}
  @keyframes wave{0%{transform:translateX(-5%) translateY(0)}50%{transform:translateX(5%) translateY(6px)}100%{transform:translateX(-5%) translateY(0)}}

  header{text-align:center;z-index:4;margin-top:10px}
  h1{font-size:2rem;margin:0 0 6px 0;letter-spacing:0.6px}
  p.lead{margin:0;color:rgba(230,238,246,0.75)}

  .register-card {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.5);
    display:flex;
    flex-direction: column;
    gap: 10px;
    width:100%;
    max-width:320px;
    color:#fff;
  }
  .register-card input {
    padding:8px 10px;
    border-radius:6px;
    border:none;
    outline:none;
    background:rgba(255,255,255,0.1);
    color:#fff;
    font-size:0.95rem;
  }
  .register-card button {
    padding:10px;
    border-radius:8px;
    border:none;
    cursor:pointer;
    background:linear-gradient(90deg,var(--neon1),var(--neon2));
    color:#000;
    font-weight:600;
    font-size:0.95rem;
    transition: transform .15s;
  }
  .register-card button:hover {transform:translateY(-2px);}
</style>
</head>
<body>
  <div class="waves" aria-hidden="true">
    <div class="wave-layer"></div>
    <div class="wave-layer layer2"></div>
  </div>

  <div class="wrap">
    <header>
      <h1>Реєстрація користувача</h1>
      <p class="lead">Введіть email або логін та пароль</p>
    </header>

    <form class="register-card" action="/register" method="POST" novalidate>
      <input type="email" id="usernameField" name="username" placeholder="Email" required
             title="Введіть коректну адресу електронної пошти (наприклад, name@example.com)">
      
      <input type="password" id="passwordField" name="password" placeholder="Пароль" required
             pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,20}$"
             title="Пароль має бути 8–20 символів, містити хоча б одну велику літеру, одну маленьку та одну цифру.">

      <button id="registerBtn">Зареєструватися</button>
      <p id="statusMessage" style="color:#ffcccb;margin-top:5px;font-size:0.9rem;"></p>
    </form>
  </div>

<script>
  const registerBtn = document.getElementById("registerBtn");
  const statusMessage = document.getElementById("statusMessage");
  const form = document.querySelector(".register-card");

  registerBtn.addEventListener("click", async e=>{
    e.preventDefault();

    if (!form.checkValidity()) {
      statusMessage.style.color="#ff6b6b";
      statusMessage.textContent="❌ Перевірте правильність введених даних!";
      form.reportValidity();
      return;
    }

    const username = document.getElementById("usernameField").value.trim();
    const password = document.getElementById("passwordField").value.trim();

    try {
      const res = await fetch("/register", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({username,password})
      });
      if(res.redirected){
        window.location.href = res.url;
      } else {
        const text = await res.text();
        statusMessage.style.color="#ff6b6b";
        statusMessage.textContent = text;
      }
    } catch(err){
      statusMessage.style.color="#ff6b6b";
      statusMessage.textContent="Помилка: сервер недоступний";
    }
  });
</script>
</body>
</html>
