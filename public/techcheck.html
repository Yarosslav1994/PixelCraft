<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>TechCheck — Демо №2</title>
<style>
  :root{
    --bg: #0b0f1a;
    --card-bg: rgba(255,255,255,0.03);
    --neon1: #7df9ff;
    --neon2: #ff6bcb;
    --accent: linear-gradient(90deg,var(--neon1),var(--neon2));
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);color:#e6eef6;overflow-x:hidden}
  .wrap{min-height:100vh;display:flex;flex-direction:column;align-items:center;gap:40px;padding:60px 20px;position:relative;margin-left:60px;transition:margin-left 0.3s ease-in-out}

  .navbar {
    position: fixed;
    top: 0;
    left: 60px;
    right: 0;
    background: rgba(11,15,26,0.8);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 40px;
    backdrop-filter: blur(8px);
    border-bottom: 1px solid rgba(255,255,255,0.05);
    z-index: 20;
    transition: left 0.3s ease-in-out;
  }
  .logo {font-weight:700;font-size:1.3rem;background:var(--accent);-webkit-background-clip:text;background-clip:text;color:transparent;}
  .nav-links {display:flex;gap:20px;margin-left:10px;}
  .nav-links a {position:relative;color:rgba(255,255,255,0.85);text-decoration:none;font-weight:500;letter-spacing:0.5px;transition:color 0.3s;}
  .nav-links a::after {content:"";position:absolute;left:0;bottom:-4px;width:0;height:3px;border-radius:4px;background:linear-gradient(90deg,#ffae00,#ff6a00);box-shadow:0 0 6px #ffae00,0 0 10px #ff6a00;transition:width 0.3s;}
  .nav-links a:hover{color:#fff;text-shadow:0 0 8px #ffae00;}
  .nav-links a:hover::after{width:100%;}

  .sidebar {
    position: fixed;
    top: 0;
    left: 0;
    width: 60px;
    height: 100vh;
    background: #1a2238;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 100px;
    transition: width 0.3s ease-in-out;
    overflow-x: hidden;
    z-index: 15;
  }
  .sidebar:hover {width: 200px;}
  .sidebar a {position:relative;margin:20px 0;display:flex;align-items:center;gap:10px;}
  .sidebar img {width:40px;cursor:pointer;transition: transform 0.3s ease;}
  .sidebar a:hover img {transform:scale(1.2);}
  .tooltip {display:none;background-color:#2c3e50;color:white;padding:5px 10px;border-radius:5px;font-size:14px;white-space:nowrap;}
  .sidebar a:hover .tooltip {display:inline-block;}

  header{text-align:center;z-index:4;margin-top:10px}
  h1{font-size:2rem;margin:0 0 6px 0;letter-spacing:0.6px}
  p.lead{margin:0;color:rgba(230,238,246,0.75)}

  .login-card {
    background: var(--card-bg);
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.6);
    display:flex;
    flex-direction: column;
    gap: 15px;
    width:100%;
    max-width:600px;
    color:#fff;
    position:relative;
  }
  .login-card textarea {
    padding:10px;
    border-radius:8px;
    border:none;
    outline:none;
    background:rgba(255,255,255,0.1);
    color:#fff;
    resize: vertical;
  }
  .login-card button {
    padding:12px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    background:linear-gradient(90deg,var(--neon1),var(--neon2));
    color:#000;
    font-weight:600;
    transition: transform .15s;
  }
  .login-card button:hover {transform:translateY(-2px);}

  .timer {position:absolute;top:20px;right:20px;color:#ff6bcb;font-weight:600;font-size:1.1rem;}
  .difficulty {color:#7df9ff;font-weight:500;}
  .score {color:#ffae00;font-weight:700;}
</style>
</head>
<body>
  <div class="sidebar">
    <div class="icon-container">
      <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/1827/1827390.png" alt="Чат"><span class="tooltip">Чат</span></a>
      <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/2920/2920322.png" alt="Час"><span class="tooltip">Час</span></a>
      <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Профіль"><span class="tooltip">Профіль</span></a>
      <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135719.png" alt="Курси"><span class="tooltip">Курси</span></a>
      <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" alt="Мова"><span class="tooltip">Мова</span></a>
    </div>
  </div>

  <nav class="navbar">
    <a href="index.html"><div class="logo">PixelCraft</div></a>
    <div class="nav-links">
      <a href="index.html">Головна</a>
      <a href="#">Про нас</a>
      <a href="#">Контакти</a>
      <a href="register.html">Реєстрація</a>
    </div>
  </nav>

  <div class="wrap">
    <header>
      <h1>TechCheck</h1>
      <p class="lead">Відповідай на питання та отримуй фідбек від AI</p>
    </header>

    <section class="login-card">
      <div class="timer" id="timer">00:30</div>
      <p><strong>Рівень складності:</strong> <span class="difficulty" id="difficulty">Середній</span></p>
      <p><strong>Питання:</strong> Що таке Unity і для чого він використовується?</p>
      <textarea id="answerField" placeholder="Введіть відповідь тут..."></textarea>
      <button id="submitAnswer">Відправити</button>
      <p id="feedbackMessage" style="margin-top:10px;color:#7df9ff;"></p>
      <p><strong>Бали за відповідь:</strong> <span class="score" id="score">0</span></p>
    </section>
  </div>

<script>
let time = 30;
const timerDisplay = document.getElementById("timer");
const scoreDisplay = document.getElementById("score");
let score = 0;

// Таймер
const countdown = setInterval(()=>{
  if(time<=0){
    clearInterval(countdown);
    timerDisplay.textContent="Час вийшов!";
    document.getElementById("submitAnswer").disabled=true;
  } else {
    timerDisplay.textContent = "00:" + (time<10?"0":"") + time;
    time--;
  }
},1000);

const submitBtn = document.getElementById("submitAnswer");
const feedback = document.getElementById("feedbackMessage");
const difficulty = document.getElementById("difficulty");

submitBtn.addEventListener("click", async ()=>{
  const answer = document.getElementById("answerField").value.trim();
  if(!answer){
    feedback.style.color = "#ff6b6b";
    feedback.textContent = "Будь ласка, введіть відповідь!";
    return;
  }

  feedback.style.color = "#7df9ff";
  feedback.textContent = "⏳ AI аналізує вашу відповідь...";

  // Надсилаємо відповідь на сервер
  try {
    const res = await fetch('/api/techcheck', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({answer})
    });
    const data = await res.json();
    feedback.textContent = data.feedback;
    score += data.points;
    scoreDisplay.textContent = score;

    // Випадкова зміна складності
    const levels = ["Легкий","Середній","Важкий"];
    difficulty.textContent = levels[Math.floor(Math.random()*levels.length)];

  } catch(err){
    feedback.style.color="#ff6b6b";
    feedback.textContent = "❌ Помилка при зв’язку з AI.";
  }
});
</script>
</body>
</html>
